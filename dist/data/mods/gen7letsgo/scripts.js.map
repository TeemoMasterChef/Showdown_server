{
  "version": 3,
  "sources": ["../../../../data/mods/gen7letsgo/scripts.ts"],
  "sourcesContent": ["function checkMegaForme(species: Species, forme: string, battle: Battle) {\r\n\tconst baseSpecies = battle.dex.species.get(species.baseSpecies);\r\n\tconst altForme = battle.dex.species.get(`${baseSpecies.name}-${forme}`);\r\n\tif (\r\n\t\taltForme.exists && !battle.ruleTable.isBannedSpecies(altForme) &&\r\n\t\t!battle.ruleTable.isBanned('pokemontag:mega')\r\n\t) {\r\n\t\treturn altForme.name;\r\n\t}\r\n\treturn null;\r\n}\r\n\r\nexport const Scripts: ModdedBattleScriptsData = {\r\n\tinherit: 'gen7',\r\n\tinit() {\r\n\t\tthis.modData('Abilities', 'noability').isNonstandard = null;\r\n\t\tfor (const i in this.data.Pokedex) {\r\n\t\t\tthis.modData('Pokedex', i).abilities = { 0: 'No Ability' };\r\n\t\t\tdelete this.modData('Pokedex', i).requiredItem;\r\n\t\t}\r\n\t},\r\n\tactions: {\r\n\t\tinherit: true,\r\n\t\tcanMegaEvo(pokemon) {\r\n\t\t\treturn checkMegaForme(pokemon.baseSpecies, 'Mega', this.battle);\r\n\t\t},\r\n\t\tcanMegaEvoX(pokemon) {\r\n\t\t\treturn checkMegaForme(pokemon.baseSpecies, 'Mega-X', this.battle);\r\n\t\t},\r\n\t\tcanMegaEvoY(pokemon) {\r\n\t\t\treturn checkMegaForme(pokemon.baseSpecies, 'Mega-Y', this.battle);\r\n\t\t},\r\n\t\trunMegaEvo(pokemon) {\r\n\t\t\tconst speciesid = pokemon.canMegaEvo || pokemon.canMegaEvoX || pokemon.canMegaEvoY;\r\n\t\t\tif (!speciesid) return false;\r\n\r\n\t\t\tpokemon.formeChange(speciesid, null, true);\r\n\t\t\tthis.battle.add('-mega', pokemon, this.dex.species.get(speciesid).baseSpecies);\r\n\t\t\tpokemon.formeRegression = true;\r\n\r\n\t\t\t// Limit one mega evolution\r\n\t\t\tfor (const ally of pokemon.side.pokemon) {\r\n\t\t\t\tally.canMegaEvo = null;\r\n\t\t\t\tally.canMegaEvoX = null;\r\n\t\t\t\tally.canMegaEvoY = null;\r\n\t\t\t}\r\n\r\n\t\t\tthis.battle.runEvent('AfterMega', pokemon);\r\n\t\t\treturn true;\r\n\t\t},\r\n\t\trunMegaEvoX(pokemon) {\r\n\t\t\tif (!pokemon.canMegaEvoX) return false;\r\n\t\t\tpokemon.canMegaEvoY = null;\r\n\t\t\treturn this.runMegaEvo(pokemon);\r\n\t\t},\r\n\t\trunMegaEvoY(pokemon) {\r\n\t\t\tif (!pokemon.canMegaEvoY) return false;\r\n\t\t\tpokemon.canMegaEvoX = null;\r\n\t\t\treturn this.runMegaEvo(pokemon);\r\n\t\t},\r\n\t},\r\n\t/**\r\n\t * Given a table of base stats and a pokemon set, return the actual stats.\r\n\t */\r\n\tstatModify(baseStats, set, statName) {\r\n\t\tconst tr = this.trunc;\r\n\t\tlet stat = baseStats[statName];\r\n\t\tif (statName === 'hp') {\r\n\t\t\treturn tr(tr(2 * stat + set.ivs[statName] + 100) * set.level / 100 + 10) + set.evs[statName];\r\n\t\t}\r\n\t\tstat = tr((tr(2 * stat + set.ivs[statName]) * set.level / 100 + 5));\r\n\t\tconst nature = this.dex.natures.get(set.nature);\r\n\t\tif (nature.plus === statName) {\r\n\t\t\tstat = tr(tr(stat * 110, 16) / 100);\r\n\t\t} else if (nature.minus === statName) {\r\n\t\t\tstat = tr(tr(stat * 90, 16) / 100);\r\n\t\t}\r\n\t\tset.happiness = 70;\r\n\t\tconst friendshipValue = tr((set.happiness / 255 / 10 + 1) * 100);\r\n\t\tstat = tr(stat * friendshipValue / 100);\r\n\t\treturn stat;\r\n\t},\r\n};\r\n"],
  "mappings": ";;;;;;;;;;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAAS,eAAe,SAAkB,OAAe,QAAgB;AACxE,QAAM,cAAc,OAAO,IAAI,QAAQ,IAAI,QAAQ,WAAW;AAC9D,QAAM,WAAW,OAAO,IAAI,QAAQ,IAAI,GAAG,YAAY,IAAI,IAAI,KAAK,EAAE;AACtE,MACC,SAAS,UAAU,CAAC,OAAO,UAAU,gBAAgB,QAAQ,KAC7D,CAAC,OAAO,UAAU,SAAS,iBAAiB,GAC3C;AACD,WAAO,SAAS;AAAA,EACjB;AACA,SAAO;AACR;AAEO,MAAM,UAAmC;AAAA,EAC/C,SAAS;AAAA,EACT,OAAO;AACN,SAAK,QAAQ,aAAa,WAAW,EAAE,gBAAgB;AACvD,eAAW,KAAK,KAAK,KAAK,SAAS;AAClC,WAAK,QAAQ,WAAW,CAAC,EAAE,YAAY,EAAE,GAAG,aAAa;AACzD,aAAO,KAAK,QAAQ,WAAW,CAAC,EAAE;AAAA,IACnC;AAAA,EACD;AAAA,EACA,SAAS;AAAA,IACR,SAAS;AAAA,IACT,WAAW,SAAS;AACnB,aAAO,eAAe,QAAQ,aAAa,QAAQ,KAAK,MAAM;AAAA,IAC/D;AAAA,IACA,YAAY,SAAS;AACpB,aAAO,eAAe,QAAQ,aAAa,UAAU,KAAK,MAAM;AAAA,IACjE;AAAA,IACA,YAAY,SAAS;AACpB,aAAO,eAAe,QAAQ,aAAa,UAAU,KAAK,MAAM;AAAA,IACjE;AAAA,IACA,WAAW,SAAS;AACnB,YAAM,YAAY,QAAQ,cAAc,QAAQ,eAAe,QAAQ;AACvE,UAAI,CAAC,UAAW,QAAO;AAEvB,cAAQ,YAAY,WAAW,MAAM,IAAI;AACzC,WAAK,OAAO,IAAI,SAAS,SAAS,KAAK,IAAI,QAAQ,IAAI,SAAS,EAAE,WAAW;AAC7E,cAAQ,kBAAkB;AAG1B,iBAAW,QAAQ,QAAQ,KAAK,SAAS;AACxC,aAAK,aAAa;AAClB,aAAK,cAAc;AACnB,aAAK,cAAc;AAAA,MACpB;AAEA,WAAK,OAAO,SAAS,aAAa,OAAO;AACzC,aAAO;AAAA,IACR;AAAA,IACA,YAAY,SAAS;AACpB,UAAI,CAAC,QAAQ,YAAa,QAAO;AACjC,cAAQ,cAAc;AACtB,aAAO,KAAK,WAAW,OAAO;AAAA,IAC/B;AAAA,IACA,YAAY,SAAS;AACpB,UAAI,CAAC,QAAQ,YAAa,QAAO;AACjC,cAAQ,cAAc;AACtB,aAAO,KAAK,WAAW,OAAO;AAAA,IAC/B;AAAA,EACD;AAAA;AAAA;AAAA;AAAA,EAIA,WAAW,WAAW,KAAK,UAAU;AACpC,UAAM,KAAK,KAAK;AAChB,QAAI,OAAO,UAAU,QAAQ;AAC7B,QAAI,aAAa,MAAM;AACtB,aAAO,GAAG,GAAG,IAAI,OAAO,IAAI,IAAI,QAAQ,IAAI,GAAG,IAAI,IAAI,QAAQ,MAAM,EAAE,IAAI,IAAI,IAAI,QAAQ;AAAA,IAC5F;AACA,WAAO,GAAI,GAAG,IAAI,OAAO,IAAI,IAAI,QAAQ,CAAC,IAAI,IAAI,QAAQ,MAAM,CAAE;AAClE,UAAM,SAAS,KAAK,IAAI,QAAQ,IAAI,IAAI,MAAM;AAC9C,QAAI,OAAO,SAAS,UAAU;AAC7B,aAAO,GAAG,GAAG,OAAO,KAAK,EAAE,IAAI,GAAG;AAAA,IACnC,WAAW,OAAO,UAAU,UAAU;AACrC,aAAO,GAAG,GAAG,OAAO,IAAI,EAAE,IAAI,GAAG;AAAA,IAClC;AACA,QAAI,YAAY;AAChB,UAAM,kBAAkB,IAAI,IAAI,YAAY,MAAM,KAAK,KAAK,GAAG;AAC/D,WAAO,GAAG,OAAO,kBAAkB,GAAG;AACtC,WAAO;AAAA,EACR;AACD;",
  "names": []
}
